<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Resume Checker - Professional Resume Analysis</title>
<meta name="description" content="Advanced AI-powered resume analysis tool with comprehensive skill matching and feedback">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
.main-container {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    backdrop-filter: blur(10px);
    margin: 20px 0;
}
.logo {width: 60px; margin-right: 15px;}
.badge-skill {margin:2px; font-size:0.9rem;}
.result-card {margin-top:20px; background: #ffffff; border-radius: 15px; box-shadow:0px 10px 30px rgba(0,0,0,0.1);}
.drag-drop-zone {
    border: 3px dashed #007bff;
    border-radius: 15px;
    padding: 40px;
    text-align: center;
    transition: all 0.3s ease;
    background: rgba(0,123,255,0.05);
}
.drag-drop-zone.drag-over {
    border-color: #28a745;
    background: rgba(40,167,69,0.1);
}
.progress-container {
    display: none;
    margin: 20px 0;
}
.metric-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    margin-bottom: 20px;
}
.navbar-custom {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 20px rgba(0,0,0,0.1);
}
</style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-custom mb-4">
  <div class="container">
    <div class="navbar-brand d-flex align-items-center">
      <i class="fas fa-file-alt fa-2x text-primary me-3"></i>
      <div>
        <h4 class="mb-0">AI Resume Checker</h4>
        <small class="text-muted">Professional Resume Analysis</small>
      </div>
    </div>
    <div class="navbar-nav ms-auto">
      <a class="nav-link" href="#analytics"><i class="fas fa-chart-bar"></i> Analytics</a>
      <a class="nav-link" href="#api"><i class="fas fa-code"></i> API</a>
    </div>
  </div>
</nav>

<div class="container">
  <div class="main-container p-5">
    <div class="text-center mb-5">
      <h1 class="display-4 text-primary mb-3">AI-Powered Resume Analysis</h1>
      <p class="lead text-muted">Get comprehensive feedback on your resume with advanced AI analysis</p>
    </div>

    <div id="errorContainer"></div>

    <div class="card shadow-lg border-0">
      <div class="card-header bg-gradient text-white" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
        <h3 class="mb-0"><i class="fas fa-upload me-2"></i>Upload Your Resume</h3>
      </div>
      <div class="card-body p-4">
        <form method="POST" enctype="multipart/form-data" onsubmit="return validateForm()">
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label"><i class="fas fa-user me-2"></i>Full Name</label>
              <input type="text" class="form-control form-control-lg" name="name" placeholder="Enter your full name" required>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label"><i class="fas fa-envelope me-2"></i>Email (Optional)</label>
              <input type="email" class="form-control form-control-lg" name="email" placeholder="your.email@example.com">
            </div>
          </div>
          
          <div class="mb-4">
            <label class="form-label"><i class="fas fa-briefcase me-2"></i>Target Domain</label>
            <select class="form-select form-select-lg" name="domain" required>
              <option value="">Select Target Domain</option>
              <option value="Data Science">Data Science</option>
              <option value="Web Development">Web Development</option>
              <option value="Mobile App">Mobile App</option>
              <option value="AI/ML">AI/ML</option>
            </select>
          </div>
          
          <div class="mb-4">
            <label class="form-label"><i class="fas fa-file me-2"></i>Resume File</label>
            <div class="border rounded p-4 text-center bg-light">
              <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
              <h5>Select your resume file</h5>
              <input type="file" class="form-control form-control-lg" name="resume" accept=".pdf,.docx,.txt" required>
              <small class="text-muted mt-2 d-block">Supported formats: PDF, DOCX, TXT (Max: 16MB)</small>
            </div>
          </div>
          
          <div class="text-center">
            <button type="submit" class="btn btn-primary btn-lg px-5">
              <i class="fas fa-search me-2"></i>Analyze Resume
            </button>
          </div>
        </form>
      </div>
    </div>

    {% if result %}
    <div class="card mt-4 result-card">
      <div class="card-header bg-primary text-white">
        <h4 class="mb-0">Analysis Results{% if candidate %} for {{ candidate }}{% endif %}</h4>
      </div>
      <div class="card-body">
        {% if result.error %}
          <div class="alert alert-danger">
            <i class="fas fa-exclamation-triangle me-2"></i>{{ result.error }}
          </div>
        {% else %}
          <div class="row mb-4">
            <div class="col-md-2">
              <div class="metric-card text-center">
                <h2>{{ result.match_score }}%</h2>
                <p>Skills Match</p>
              </div>
            </div>
            <div class="col-md-2">
              <div class="metric-card text-center">
                <h2>{{ result.ats_analysis.score }}%</h2>
                <p>ATS Score</p>
              </div>
            </div>
            <div class="col-md-2">
              <div class="metric-card text-center">
                <h2>{{ result.word_count }}</h2>
                <p>Total Words</p>
              </div>
            </div>
            <div class="col-md-2">
              <div class="metric-card text-center">
                <h2>{{ result.section_completeness }}%</h2>
                <p>Completeness</p>
              </div>
            </div>
            <div class="col-md-2">
              <div class="metric-card text-center">
                <h2>{{ "%.0f"|format(result.readability_score) }}</h2>
                <p>Readability</p>
              </div>
            </div>
            <div class="col-md-2">
              <div class="metric-card text-center bg-{{ result.resume_strength.color }}">
                <h2>{{ result.resume_strength.score }}%</h2>
                <p>Overall</p>
              </div>
            </div>
          </div>

          <div class="row mb-4">
            <div class="col-md-6">
              <h5 class="text-success"><i class="fas fa-check-circle me-2"></i>Skills Found ({{ result.skills_found|length }})</h5>
              <div class="mb-3">
                {% for skill in result.skills_found %}
                  <span class="badge bg-success me-1 mb-1">{{ skill }}</span>
                {% endfor %}
                {% if not result.skills_found %}
                  <em class="text-muted">No relevant skills detected</em>
                {% endif %}
              </div>
            </div>
            <div class="col-md-6">
              <h5 class="text-danger"><i class="fas fa-times-circle me-2"></i>Missing Skills ({{ result.missing_skills|length }})</h5>
              <div class="mb-3">
                {% for skill in result.missing_skills[:10] %}
                  <span class="badge bg-danger me-1 mb-1">{{ skill }}</span>
                {% endfor %}
                {% if not result.missing_skills %}
                  <em class="text-success">All key skills found!</em>
                {% endif %}
              </div>
            </div>
          </div>

          {% if chart_url %}
          <div class="text-center mb-4">
            <h5><i class="fas fa-chart-pie me-2"></i>Comprehensive Analysis Dashboard</h5>
            <img src="{{ chart_url }}" class="img-fluid" alt="Analysis Dashboard" style="max-width: 100%; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
          </div>
          {% endif %}

          <!-- ðŸŒŸ NEW SPARKLING FEATURES SECTION ðŸŒŸ -->
          
          <!-- ATS Analysis -->
          <div class="row mb-4">
            <div class="col-12">
              <div class="card border-info">
                <div class="card-header bg-info text-white">
                  <h5 class="mb-0"><i class="fas fa-robot me-2"></i>ATS Compatibility Analysis</h5>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-4">
                      <div class="text-center">
                        <div class="display-4 text-info">{{ result.ats_analysis.score }}%</div>
                        <p class="text-muted">ATS Score</p>
                      </div>
                    </div>
                    <div class="col-md-8">
                      <h6>Recommendations:</h6>
                      <ul class="list-unstyled">
                        {% for rec in result.ats_analysis.recommendations %}
                          <li><i class="fas fa-check-circle text-success me-2"></i>{{ rec }}</li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Job Recommendations -->
          {% if result.job_recommendations %}
          <div class="row mb-4">
            <div class="col-12">
              <div class="card border-success">
                <div class="card-header bg-success text-white">
                  <h5 class="mb-0"><i class="fas fa-briefcase me-2"></i>Job Recommendations</h5>
                </div>
                <div class="card-body">
                  <div class="row">
                    {% for job in result.job_recommendations %}
                    <div class="col-md-6 mb-3">
                      <div class="card h-100">
                        <div class="card-body">
                          <h6 class="card-title">{{ job.title }}</h6>
                          <p class="card-text">
                            <strong>Match:</strong> {{ job.match_percentage }}%<br>
                            <strong>Top Companies:</strong> {{ job.companies|join(', ') }}
                          </p>
                        </div>
                      </div>
                    </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endif %}

          <!-- Salary Estimation -->
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card border-warning">
                <div class="card-header bg-warning text-dark">
                  <h5 class="mb-0"><i class="fas fa-dollar-sign me-2"></i>Salary Estimation</h5>
                </div>
                <div class="card-body">
                  <div class="text-center">
                    <div class="display-6 text-warning">
                      ${{ "{:,}".format(result.salary_estimate.min_salary) }} - ${{ "{:,}".format(result.salary_estimate.max_salary) }}
                    </div>
                    <p class="text-muted">Annual Salary Range ({{ result.salary_estimate.currency }})</p>
                    <small class="text-muted">
                      Market Growth: {{ result.salary_estimate.growth_rate }}% | 
                      Demand: {{ result.salary_estimate.market_demand }}
                    </small>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                  <h5 class="mb-0"><i class="fas fa-chart-line me-2"></i>Industry Benchmark</h5>
                </div>
                <div class="card-body">
                  <div class="mb-2">
                    <div class="d-flex justify-content-between">
                      <span>Your Score</span>
                      <span class="fw-bold">{{ result.industry_benchmark.your_score }}%</span>
                    </div>
                    <div class="progress mb-2">
                      <div class="progress-bar bg-info" style="width: {{ result.industry_benchmark.your_score }}%"></div>
                    </div>
                  </div>
                  <div class="mb-2">
                    <div class="d-flex justify-content-between">
                      <span>Industry Average</span>
                      <span>{{ result.industry_benchmark.industry_average }}%</span>
                    </div>
                    <div class="progress mb-2">
                      <div class="progress-bar bg-secondary" style="width: {{ result.industry_benchmark.industry_average }}%"></div>
                    </div>
                  </div>
                  <div class="text-center">
                    <span class="badge bg-primary">{{ result.industry_benchmark.ranking }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Learning Path Recommendations -->
          {% if result.learning_path %}
          <div class="row mb-4">
            <div class="col-12">
              <div class="card border-info">
                <div class="card-header bg-info text-white">
                  <h5 class="mb-0"><i class="fas fa-graduation-cap me-2"></i>Learning Path Recommendations</h5>
                </div>
                <div class="card-body">
                  <div class="row">
                    {% for course in result.learning_path %}
                    <div class="col-md-4 mb-3">
                      <div class="card h-100">
                        <div class="card-body">
                          <h6 class="card-title">{{ course.skill }}</h6>
                          <p class="card-text">
                            <strong>Platform:</strong> {{ course.platform }}<br>
                            <strong>Duration:</strong> {{ course.duration }}<br>
                            <strong>Level:</strong> {{ course.level }}
                          </p>
                          <span class="badge bg-{{ 'danger' if course.priority == 'High' else 'warning' }}">
                            {{ course.priority }} Priority
                          </span>
                        </div>
                      </div>
                    </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endif %}

          <div class="mb-4">
            <h5><i class="fas fa-robot me-2"></i>AI Feedback & Recommendations</h5>
            <div class="list-group">
              {% for feedback in result.feedback %}
                <div class="list-group-item">
                  <i class="fas fa-lightbulb text-warning me-2"></i>{{ feedback }}
                </div>
              {% endfor %}
            </div>
          </div>

          {% if pdf_url %}
          <div class="text-center">
            <a href="/download" class="btn btn-success btn-lg">
              <i class="fas fa-download me-2"></i>Download PDF Report
            </a>
          </div>
          {% endif %}
        {% endif %}
      </div>
    </div>
    {% endif %}

    <div id="results"></div>
  </div>
</div>

<script>
function validateForm() {
  const name = document.querySelector('input[name="name"]').value;
  const domain = document.querySelector('select[name="domain"]').value;
  const file = document.querySelector('input[name="resume"]').files[0];
  
  if (!name.trim()) {
    alert('Please enter your name');
    return false;
  }
  
  if (!domain) {
    alert('Please select a target domain');
    return false;
  }
  
  if (!file) {
    alert('Please select a resume file');
    return false;
  }
  
  // Check file type
  const allowedTypes = ['.pdf', '.docx', '.txt'];
  const fileName = file.name.toLowerCase();
  const isValidType = allowedTypes.some(type => fileName.endsWith(type));
  
  if (!isValidType) {
    alert('Please select a PDF, DOCX, or TXT file');
    return false;
  }
  
  // Check file size (16MB limit)
  if (file.size > 16 * 1024 * 1024) {
    alert('File size must be less than 16MB');
    return false;
  }
  
  // Show loading state
  const submitBtn = document.querySelector('button[type="submit"]');
  submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Analyzing...';
  submitBtn.disabled = true;
  
  return true;
}
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>